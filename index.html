<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Stacja Jarocin - Double Bounce</title>
    <style>
        /* --- BAZA --- */
        html, body {
            background-color: #000000;
            height: 100%;
            width: 100%;
            overflow: hidden;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            color: #ffffff;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            position: relative;
        }

        /* --- 1. G√ìRNY OBIEKT (LATAJƒÑCY ZEGAR) --- */
        #floating-top {
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            will-change: transform; 
            padding: 1vh;
            z-index: 1; 
        }
        
        #clock {
            font-size: 30vh; 
            font-weight: bold;
            line-height: 0.9;
            letter-spacing: -3px;
            text-align: center;
        }
        
        #date {
            font-size: 5vh;
            margin-top: 1vh;
            opacity: 0.9;
            text-align: center;
        }

        .current-weather {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2vh;
            margin-top: 4vh;
        }

        #weather-icon { font-size: 10vh; }
        #weather-text { font-size: 8vh; font-weight: bold; color: #ffcc00; }

        /* --- 2. DOLNY KONTENER ("KLATKA" DLA PROGNOZY) --- */
        .forecast-container-fixed {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 28vh; /* Ustalamy sta≈ÇƒÖ wysoko≈õƒá, ≈ºeby zegar wiedzia≈Ç gdzie jest pod≈Çoga */
            background-color: #000000; 
            z-index: 100;
            border-top: 2px solid #111; /* Bardzo ciemna linia oddzielajƒÖca */
            overflow: hidden; /* ≈ªeby prognoza nie wylecia≈Ça poza pasek */
        }

        /* --- 3. DOLNY OBIEKT (LATAJƒÑCA PROGNOZA) --- */
        #forecast-row-moving {
            position: absolute; /* To pozwala mu lataƒá wewnƒÖtrz .forecast-container-fixed */
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            gap: 1vw;
            /* Zmniejszy≈Çem szeroko≈õƒá do 90%, ≈ºeby mia≈Ç miejsce na ruch lewo-prawo */
            width: 90%; 
            will-change: transform;
        }

        .day-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 13vw;
        }

        .day-name { font-size: 3.5vh; margin-bottom: 0.5vh; font-weight: bold; }
        .day-icon { font-size: 5vh; margin-bottom: 0.5vh; }
        .day-temp { font-size: 3.5vh; font-weight: bold; }
        .day-temp span { color: #dddddd; font-weight: normal; font-size: 0.8em; margin-left: 3px; }

    </style>
</head>
<body>

    <div id="floating-top">
        <div>
            <div id="clock">00:00</div>
            <div id="date">...</div>
        </div>
        <div class="current-weather">
            <div id="weather-icon">‚è≥</div>
            <div id="weather-text">Jarocin: --¬∞</div> 
        </div>
    </div>

    <div class="forecast-container-fixed" id="bottom-cage">
        <div id="forecast-row-moving">
            </div>
    </div>

    <script>
        // --- PE≈ÅNY EKRAN ---
        document.body.addEventListener('click', function() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(e => console.log(e));
            }
        });

        // ==================================================
        // --- SILNIK FIZYCZNY (DWA OBIEKTY) ---
        // ==================================================
        
        // KONFIGURACJA G√ìRY (Zegar)
        let topX = 50, topY = 50;
        let topVX = 2.0, topVY = 2.0; // Prƒôdko≈õƒá g√≥ry

        // KONFIGURACJA DO≈ÅU (Prognoza)
        let botX = 10, botY = 10;
        let botVX = 1.0, botVY = 0.8; // Prƒôdko≈õƒá do≈Çu (wolniej, bo ma≈Ço miejsca)

        const topEl = document.getElementById('floating-top');
        const botCage = document.getElementById('bottom-cage');
        const botEl = document.getElementById('forecast-row-moving');

        function animateDoubleBounce() {
            // --- 1. OBLICZENIA DLA G√ìRY (ZEGAR) ---
            const maxTopW = window.innerWidth - topEl.offsetWidth;
            // Pod≈Çoga dla zegara to g√≥ra dolnego paska
            const maxTopH = window.innerHeight - botCage.offsetHeight - topEl.offsetHeight;

            topX += topVX;
            topY += topVY;

            if (topX >= maxTopW || topX <= 0) topVX *= -1;
            if (topY >= maxTopH || topY <= 0) topVY *= -1;

            topEl.style.transform = `translate(${topX}px, ${topY}px)`;


            // --- 2. OBLICZENIA DLA DO≈ÅU (PROGNOZA) ---
            // Prognoza lata TYLKO wewnƒÖtrz #bottom-cage
            const maxBotW = botCage.offsetWidth - botEl.offsetWidth;
            const maxBotH = botCage.offsetHeight - botEl.offsetHeight;

            botX += botVX;
            botY += botVY;

            // Odbicia (z ma≈Çym marginesem b≈Çƒôdu, ≈ºeby nie utknƒô≈Ço)
            if (botX >= maxBotW || botX <= 0) botVX *= -1;
            if (botY >= maxBotH || botY <= 0) botVY *= -1;

            botEl.style.transform = `translate(${botX}px, ${botY}px)`;


            // Pƒôtla animacji
            requestAnimationFrame(animateDoubleBounce);
        }

        // Start z op√≥≈∫nieniem (≈ºeby za≈Çadowa≈Çy siƒô wymiary)
        window.onload = () => {
             setTimeout(animateDoubleBounce, 500);
        };

        // ==================================================
        // --- DANE (Zegar i API) ---
        // ==================================================
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}`;
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('date').textContent = now.toLocaleDateString('pl-PL', options);
        }
        setInterval(updateTime, 1000);
        updateTime();

        function getIcon(code) {
            if (code === 0) return "‚òÄÔ∏è";
            if (code >= 1 && code <= 3) return "üå•Ô∏è";
            if (code === 45 || code === 48) return "üå´Ô∏è";
            if (code >= 51 && code <= 57) return "üåßÔ∏è";
            if (code >= 61 && code <= 67) return "üåßÔ∏è";
            if (code >= 71 && code <= 77) return "‚ùÑÔ∏è";
            if (code >= 80 && code <= 82) return "üå¶Ô∏è";
            if (code === 85 || code === 86) return "üå®Ô∏è";
            if (code >= 95 && code <= 99) return "‚õàÔ∏è";
            return "üå°Ô∏è";
        }

        async function getWeather() {
            const url = 'https://api.open-meteo.com/v1/forecast?latitude=51.972&longitude=17.502&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe%2FWarsaw';
            try {
                const response = await fetch(url);
                const data = await response.json();
                const currentTemp = Math.round(data.current_weather.temperature);
                const currentCode = data.current_weather.weathercode;
                document.getElementById('weather-icon').textContent = getIcon(currentCode);
                document.getElementById('weather-text').innerHTML = `Jarocin: ${currentTemp}¬∞C`;
                const daily = data.daily;
                const container = document.getElementById('forecast-row-moving');
                container.innerHTML = ""; 
                for(let i = 0; i <= 6; i++) {
                    const dateStr = daily.time[i];
                    const maxTemp = Math.round(daily.temperature_2m_max[i]);
                    const minTemp = Math.round(daily.temperature_2m_min[i]);
                    const code = daily.weathercode[i];
                    const dateObj = new Date(dateStr);
                    let dayName = dateObj.toLocaleDateString('pl-PL', { weekday: 'short' });
                    dayName = dayName.replace('.', '');
                    const dayHTML = `<div class="day-card"><div class="day-name">${dayName}</div><div class="day-icon">${getIcon(code)}</div><div class="day-temp">${maxTemp}¬∞<span>${minTemp}¬∞</span></div></div>`;
                    container.innerHTML += dayHTML;
                }
            } catch (error) { console.log("B≈ÇƒÖd:", error); }
        }
        getWeather();
        setInterval(getWeather, 900000); 
    </script>
</body>
</html>
